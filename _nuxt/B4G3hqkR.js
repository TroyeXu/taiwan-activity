import{as as A,o as oe,f as L,p as W,a7 as ne,aW as te,b$ as M,D as z,V as S,a5 as ae,e as le,U as Y,cs as se,B as ue,Z as ie,j as g,ct as $,aF as N,Q as p,cu as ce,cv as re,ax as de,cw as fe,cx as ye,aO as ve,cy as me,J as _,r as b,bY as Ce,cz as be,aZ as ge,bW as pe,a as Se,av as j,G as he,M as xe,cA as V}from"./CX06qJIc.js";const Be=e=>{if(!e)return{onClick:A,onMousedown:A,onMouseup:A};let n=!1,s=!1;return{onClick:a=>{n&&s&&e(a),n=s=!1},onMousedown:a=>{n=a.target===a.currentTarget},onMouseup:a=>{s=a.target===a.currentTarget}}},Ee=L({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),Oe={click:e=>e instanceof MouseEvent},Ie="overlay";var we=oe({name:"ElOverlay",props:Ee,emits:Oe,setup(e,{slots:n,emit:s}){const c=W(Ie),l=d=>{s("click",d)},{onClick:u,onMousedown:a,onMouseup:r}=Be(e.customMaskEvent?void 0:l);return()=>e.mask?ne("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:a,onMouseup:r},[z(n,"default")],M.STYLE|M.CLASS|M.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[z(n,"default")])}});const Le=we,ke=Symbol("dialogInjectionKey"),U="dialog-fade",Te=L({center:Boolean,alignCenter:Boolean,closeIcon:{type:ae},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Pe={close:()=>!0},De=L({...Te,appendToBody:Boolean,appendTo:{type:se.to.type,default:"body"},beforeClose:{type:S(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:S([String,Object]),default:U}}),Fe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Y]:e=>le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ae=(e,n={})=>{ue(e)||ie("[useLockscreen]","You need to pass a ref param to this function");const s=n.ns||W("popup"),c=g(()=>s.bm("parent","hidden"));if(!$||N(document.body,c.value))return;let l=0,u=!1,a="0";const r=()=>{setTimeout(()=>{typeof document>"u"||u&&document&&(document.body.style.width=a,ye(document.body,c.value))},200)};p(e,d=>{if(!d){r();return}u=!N(document.body,c.value),u&&(a=document.body.style.width,ce(document.body,c.value)),l=re(s.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=de(document.body,"overflowY");l>0&&(i||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${l}px)`)}),fe(()=>r())},ze=(e,n)=>{var s;const l=ve().emit,{nextZIndex:u}=me();let a="";const r=_(),d=_(),i=b(!1),f=b(!1),m=b(!1),h=b((s=e.zIndex)!=null?s:u());let y,v;const Z=Ce("namespace",be),G=g(()=>{const t={},o=`--${Z.value}-dialog`;return e.fullscreen||(e.top&&(t[`${o}-margin-top`]=e.top),e.width&&(t[`${o}-width`]=ge(e.width))),t}),K=g(()=>e.alignCenter?{display:"flex"}:{}),H=g(()=>{const t={name:e.transition,onAfterEnter:x,onBeforeLeave:E,onAfterLeave:B};if(pe(e.transition)){const o={...e.transition},T=(C,ee)=>D=>{Se(C)?C.forEach(F=>{j(F)&&F(D)}):j(C)&&C(D),ee()};return o.onAfterEnter=T(o.onAfterEnter,x),o.onBeforeLeave=T(o.onBeforeLeave,E),o.onAfterLeave=T(o.onAfterLeave,B),o.name||(o.name=U),o}return t});function x(){l("opened")}function B(){l("closed"),l(Y,!1),e.destroyOnClose&&(m.value=!1)}function E(){l("close")}function k(){v?.(),y?.(),e.openDelay&&e.openDelay>0?{stop:y}=V(()=>P(),e.openDelay):P()}function O(){y?.(),v?.(),e.closeDelay&&e.closeDelay>0?{stop:v}=V(()=>w(),e.closeDelay):w()}function I(){function t(o){o||(f.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(t):O()}function q(){e.closeOnClickModal&&I()}function P(){$&&(i.value=!0)}function w(){i.value=!1}function J(){l("openAutoFocus")}function Q(){l("closeAutoFocus")}function X(t){var o;((o=t.detail)==null?void 0:o.focusReason)==="pointer"&&t.preventDefault()}e.lockScroll&&Ae(i);function R(){e.closeOnPressEscape&&I()}return p(()=>e.zIndex,()=>{var t;h.value=(t=e.zIndex)!=null?t:u()}),p(()=>e.modelValue,t=>{var o;t?(f.value=!1,k(),m.value=!0,h.value=(o=e.zIndex)!=null?o:u(),he(()=>{l("open"),n.value&&(n.value.parentElement.scrollTop=0,n.value.parentElement.scrollLeft=0,n.value.scrollTop=0)})):i.value&&O()}),p(()=>e.fullscreen,t=>{n.value&&(t?(a=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=a)}),xe(()=>{e.modelValue&&(i.value=!0,m.value=!0,k())}),{afterEnter:x,afterLeave:B,beforeLeave:E,handleClose:I,onModalClick:q,close:O,doClose:w,onOpenAutoFocus:J,onCloseAutoFocus:Q,onCloseRequested:R,onFocusoutPrevented:X,titleId:r,bodyId:d,closed:f,style:G,overlayDialogStyle:K,rendered:m,visible:i,zIndex:h,transitionConfig:H}};export{Le as E,Te as a,ke as b,Fe as c,Pe as d,De as e,Be as f,ze as u};
