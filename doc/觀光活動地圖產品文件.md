# 觀光活動地圖產品文件

## 1. 產品概述

### 1.1 產品願景
建立一個整合性的觀光活動地圖平台，協助使用者快速發現並規劃參與台灣各地的觀光活動。

### 1.2 核心價值
- **資訊整合**：從多個來源收集觀光活動資訊
- **資料準確**：透過 Claude Code 驗證確保資料真實性
- **便捷搜尋**：基於位置與時間的智慧篩選
- **視覺化呈現**：Google Maps 地圖標記展示

### 1.3 目標使用者
- 國內外遊客
- 週末活動規劃者
- 文化活動愛好者
- 在地居民

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 活動篩選系統
- **活動類型篩選**
  - 傳統節慶
  - 浪漫之旅
  - 藝術文化
  - 養生樂活
  - 美食饗宴
  - 自然生態
  - 原民慶典
  - 客家文化

- **時間篩選**
  - 開始日期選擇器
  - 結束日期選擇器
  - 快速選項：本週、本月、下週

- **地區篩選**
  - 北部地區
  - 中部地區
  - 南部地區
  - 東部地區
  - 離島地區

#### 2.1.2 地圖展示功能
- Google Maps 整合
- 當前位置定位
- 活動地點標記（根據類型使用不同圖標）
- 點擊標記顯示活動詳情
- 路線規劃功能

#### 2.1.3 活動詳情展示
- 活動名稱
- 舉辦地點（含詳細地址）
- 活動時間（開始/結束）
- 活動類型
- 活動描述
- 聯絡資訊
- 相關連結

### 2.2 資料管理功能

#### 2.2.1 資料收集流程
1. 多來源爬蟲系統收集原始資料
2. 資料暫存於待驗證區
3. Claude Code 驗證系統處理
4. 標準化格式轉換
5. 儲存至主資料庫

#### 2.2.2 資料驗證規則
- 必要欄位完整性檢查
- 地址真實性驗證
- 時間邏輯檢查
- 重複活動偵測
- 資料來源可信度評分

## 3. 資料標準格式

### 3.1 統一資料結構
```json
{
  "id": "unique_identifier",
  "name": "活動名稱",
  "location": {
    "address": "完整地址",
    "district": "行政區",
    "city": "縣市",
    "region": "北部/中部/南部/東部/離島",
    "coordinates": {
      "lat": 25.0330,
      "lng": 121.5654
    }
  },
  "time": {
    "start_date": "2025-01-20",
    "end_date": "2025-01-21",
    "start_time": "09:00",
    "end_time": "17:00",
    "recurring": false
  },
  "category": ["藝術文化", "傳統節慶"],
  "description": "活動詳細描述",
  "contact": {
    "phone": "聯絡電話",
    "email": "聯絡信箱",
    "website": "官方網站"
  },
  "source": {
    "website": "資料來源網站",
    "crawled_at": "2025-01-20T10:00:00Z",
    "verified": true,
    "verification_date": "2025-01-20T11:00:00Z"
  },
  "status": "active/pending/expired"
}
```

### 3.2 資料驗證欄位
- **必填欄位**：name, location.address, time.start_date, category
- **選填欄位**：description, contact, time.end_date

## 4. 系統架構

### 4.1 技術架構
```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   前端應用      │     │   API 服務器    │     │   資料庫        │
│  - React/Vue    │◄────┤  - Node.js      │◄────┤  - PostgreSQL   │
│  - Google Maps  │     │  - Express      │     │  - Redis Cache  │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                               ▲
                               │
                        ┌──────┴──────┐
                        │ Claude Code │
                        │ 驗證服務    │
                        └─────────────┘
                               ▲
                               │
                    ┌──────────┴──────────┐
                    │    爬蟲系統         │
                    │  - Python Scrapy    │
                    │  - 多來源整合       │
                    └─────────────────────┘
```

### 4.2 資料流程
1. **資料收集階段**
   - 爬蟲定期從各網站抓取資料
   - 原始資料存入暫存區

2. **資料驗證階段**
   - Claude Code 接收待驗證資料
   - 執行驗證規則
   - 標記驗證結果

3. **資料處理階段**
   - 格式標準化
   - 地理編碼（地址轉座標）
   - 分類標籤處理

4. **資料儲存階段**
   - 驗證通過資料存入主資料庫
   - 建立搜尋索引
   - 更新快取

## 5. Claude Code 驗證流程

### 5.1 驗證步驟
1. **格式檢查**
   - 檢查必要欄位是否存在
   - 驗證資料類型正確性

2. **內容驗證**
   - 地址格式與真實性
   - 時間邏輯（開始時間早於結束時間）
   - 類別標籤有效性

3. **重複檢測**
   - 比對現有資料庫
   - 識別相似活動

4. **品質評分**
   - 資料完整度評分
   - 來源可信度評分
   - 綜合品質分數

### 5.2 驗證回應格式
```json
{
  "validation_id": "val_123456",
  "original_data": {},
  "validated_data": {},
  "validation_result": {
    "passed": true,
    "score": 0.95,
    "issues": [],
    "suggestions": []
  },
  "timestamp": "2025-01-20T12:00:00Z"
}
```

## 6. 使用者介面設計

### 6.1 主要頁面
1. **地圖首頁**
   - 全螢幕地圖顯示
   - 側邊篩選面板
   - 活動列表檢視切換

2. **活動詳情頁**
   - 活動完整資訊
   - 地圖定位
   - 分享功能
   - 加入收藏功能

3. **我的收藏**
   - 已收藏活動
   - 收藏分類管理

### 6.2 互動流程
1. 使用者進入首頁 → 自動定位當前位置
2. 選擇篩選條件 → 即時更新地圖標記
3. 點擊地圖標記 → 顯示活動摘要
4. 點擊詳情 → 進入活動詳情頁
5. 加入收藏 → 儲存至個人收藏清單

## 7. 開發時程規劃

### Phase 1：基礎建設（2週）
- 建立專案架構
- 資料庫設計
- API 基礎框架

### Phase 2：資料處理（3週）
- Claude Code 驗證系統
- 資料標準化流程
- 爬蟲系統整合介面

### Phase 3：前端開發（3週）
- 地圖介面實作
- 篩選功能開發
- 活動詳情頁面

### Phase 4：整合測試（2週）
- 系統整合測試
- 效能優化
- 使用者測試

### Phase 5：上線準備（1週）
- 部署環境設置
- 監控系統建立
- 文件完善

## 8. 成功指標

### 8.1 技術指標
- 資料驗證準確率 > 95%
- API 回應時間 < 500ms
- 地圖載入時間 < 3秒

### 8.2 業務指標
- 月活躍使用者數
- 平均使用時長
- 活動參與轉換率

## 9. 風險評估與對策

### 9.1 技術風險
- **資料來源變更**：建立監控機制，快速調整爬蟲
- **驗證系統錯誤**：建立人工審核機制補充
- **地圖 API 限制**：評估使用量，必要時升級方案

### 9.2 營運風險
- **資料品質問題**：持續優化驗證規則
- **使用者體驗**：定期收集回饋並改善

## 10. 未來擴展

### 10.1 功能擴展
- 使用者評論系統
- 社群分享功能
- 個人化推薦
- 多語言支援

### 10.2 資料擴展
- 增加更多資料來源
- 整合交通資訊
- 天氣資訊整合
- 住宿推薦

---

## 附錄：技術規格參考

### API 端點設計
- `GET /api/activities` - 取得活動列表
- `GET /api/activities/:id` - 取得單一活動詳情
- `POST /api/activities/search` - 進階搜尋
- `GET /api/regions` - 取得地區列表
- `GET /api/categories` - 取得類別列表

### 資料庫表格設計
- activities - 活動主表
- locations - 地點資訊表
- categories - 類別表
- activity_categories - 活動類別關聯表
- data_sources - 資料來源表
- validation_logs - 驗證記錄表