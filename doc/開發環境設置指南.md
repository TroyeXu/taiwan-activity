# Nuxt.js è§€å…‰æ´»å‹•åœ°åœ–é–‹ç™¼ç’°å¢ƒè¨­ç½®æŒ‡å—

## 1. ç³»çµ±éœ€æ±‚

### 1.1 åŸºæœ¬éœ€æ±‚
```yaml
æ“ä½œç³»çµ±: macOS / Windows / Linux
Node.js: >= 18.0.0 (æ¨è–¦ 20.x LTS)
npm: >= 8.0.0 æˆ– pnpm >= 7.0.0
Git: >= 2.30.0
```

### 1.2 æ¨è–¦å·¥å…·
```yaml
ç·¨è¼¯å™¨: VS Code
ç€è¦½å™¨: Chrome (é–‹ç™¼è€…å·¥å…·)
çµ‚ç«¯: iTerm2 (macOS) / Windows Terminal
è³‡æ–™åº«ç®¡ç†: Drizzle Studio / DB Browser for SQLite
```

## 2. é–‹ç™¼ç’°å¢ƒå®‰è£

### 2.1 Node.js å®‰è£
```bash
# ä½¿ç”¨ nvm ç®¡ç† Node.js ç‰ˆæœ¬
# macOS/Linux
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# å®‰è£ä¸¦ä½¿ç”¨ Node.js 20
nvm install 20
nvm use 20

# Windows ä½¿ç”¨ nvm-windows
# ä¸‹è¼‰ä¸¦å®‰è£: https://github.com/coreybutler/nvm-windows

# é©—è­‰å®‰è£
node --version  # æ‡‰é¡¯ç¤º v20.x.x
npm --version   # æ‡‰é¡¯ç¤º 10.x.x
```

### 2.2 å°ˆæ¡ˆåˆå§‹åŒ–
```bash
# 1. å…‹éš†å°ˆæ¡ˆ (å¦‚æœå¾ Git é–‹å§‹)
git clone <repository-url>
cd nuxt-tourism-map

# 2. æˆ–å»ºç«‹æ–°å°ˆæ¡ˆ
npx nuxi@latest init nuxt-tourism-map
cd nuxt-tourism-map

# 3. å®‰è£ä¾è³´
npm install

# 4. è¤‡è£½ç’°å¢ƒè®Šæ•¸
cp .env.example .env

# 5. ç·¨è¼¯ç’°å¢ƒè®Šæ•¸
nano .env  # æˆ–ä½¿ç”¨ä½ å–œæ­¡çš„ç·¨è¼¯å™¨
```

### 2.3 å¿…è¦å¥—ä»¶å®‰è£
```bash
# UI æ¡†æ¶å’Œå·¥å…·
npm install @element-plus/nuxt @nuxtjs/tailwindcss
npm install @pinia/nuxt @vueuse/nuxt

# è³‡æ–™åº«ç›¸é—œ
npm install drizzle-orm better-sqlite3
npm install -D drizzle-kit @types/better-sqlite3

# é–‹ç™¼å·¥å…·
npm install -D @nuxt/devtools eslint prettier
npm install -D @types/node tsx

# æ¸¬è©¦å·¥å…· (å¯é¸)
npm install -D vitest @vue/test-utils @nuxt/test-utils
```

## 3. VS Code é–‹ç™¼ç’°å¢ƒé…ç½®

### 3.1 æ¨è–¦æ“´å±•
```json
{
  "recommendations": [
    "Vue.volar",
    "Vue.vscode-typescript-vue-plugin", 
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json"
  ]
}
```

### 3.2 VS Code è¨­å®š
```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "typescript.preferences.importModuleSpecifier": "relative",
  "vue.inlayHints.missingProps": true,
  "vue.inlayHints.optionsWrapper": true,
  "tailwindCSS.experimental.classRegex": [
    ["class:\\s*?[\"'`]([^\"'`]*).*?[\"'`]", "[\"'`]([^\"'`]*)[\"'`]"]
  ],
  "files.associations": {
    "*.css": "tailwindcss"
  }
}
```

### 3.3 é™¤éŒ¯é…ç½®
```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Nuxt: Chrome",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}",
      "sourceMaps": true
    },
    {
      "name": "Nuxt: Server",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/.bin/nuxi",
      "args": ["dev"],
      "console": "integratedTerminal"
    }
  ]
}
```

## 4. è³‡æ–™åº«ç’°å¢ƒè¨­ç½®

### 4.1 SQLite + SpatiaLite å®‰è£

#### macOS
```bash
# ä½¿ç”¨ Homebrew å®‰è£
brew install sqlite spatialite-tools

# é©—è­‰å®‰è£
sqlite3 --version
spatialite --version
```

#### Ubuntu/Debian
```bash
# å®‰è£ SQLite å’Œ SpatiaLite
sudo apt-get update
sudo apt-get install sqlite3 spatialite-bin libspatialite7

# é©—è­‰å®‰è£
sqlite3 --version
spatialite --version
```

#### Windows
```powershell
# ä½¿ç”¨ Chocolatey å®‰è£
choco install sqlite

# æˆ–æ‰‹å‹•ä¸‹è¼‰
# SQLite: https://sqlite.org/download.html
# SpatiaLite: https://www.gaia-gis.it/fossil/libspatialite/index
```

### 4.2 è³‡æ–™åº«åˆå§‹åŒ–è…³æœ¬
```typescript
// scripts/setup-database.ts
import Database from 'better-sqlite3';
import { migrate } from 'drizzle-orm/better-sqlite3/migrator';
import { drizzle } from 'drizzle-orm/better-sqlite3';
import { existsSync, mkdirSync } from 'fs';
import path from 'path';

async function setupDatabase() {
  // ç¢ºä¿è³‡æ–™ç›®éŒ„å­˜åœ¨
  const dataDir = path.join(process.cwd(), 'data');
  if (!existsSync(dataDir)) {
    mkdirSync(dataDir, { recursive: true });
  }

  // å»ºç«‹è³‡æ–™åº«é€£æ¥
  const dbPath = path.join(dataDir, 'tourism.db');
  const sqlite = new Database(dbPath);
  
  try {
    // å•Ÿç”¨å¤–éµç´„æŸ
    sqlite.pragma('foreign_keys = ON');
    
    // è¼‰å…¥ SpatiaLite æ“´å±•
    sqlite.exec('SELECT load_extension("mod_spatialite")');
    console.log('âœ… SpatiaLite æ“´å±•è¼‰å…¥æˆåŠŸ');
    
    // åˆå§‹åŒ–ç©ºé–“å…ƒæ•¸æ“š
    sqlite.exec('SELECT InitSpatialMetaData(1)');
    console.log('âœ… ç©ºé–“å…ƒæ•¸æ“šåˆå§‹åŒ–å®Œæˆ');
    
  } catch (error) {
    console.warn('âš ï¸  SpatiaLite æ“´å±•è¼‰å…¥å¤±æ•—ï¼Œå°‡ä½¿ç”¨åŸºæœ¬åœ°ç†åŠŸèƒ½');
  }

  // åŸ·è¡Œ Drizzle é·ç§»
  const db = drizzle(sqlite);
  await migrate(db, { migrationsFolder: './db/migrations' });
  console.log('âœ… è³‡æ–™åº«é·ç§»å®Œæˆ');

  sqlite.close();
  console.log('ğŸ‰ è³‡æ–™åº«è¨­ç½®å®Œæˆï¼');
}

setupDatabase().catch(console.error);
```

### 4.3 package.json è…³æœ¬æ›´æ–°
```json
{
  "scripts": {
    "setup": "tsx scripts/setup-database.ts",
    "dev": "npm run setup && nuxt dev",
    "db:generate": "drizzle-kit generate:sqlite",
    "db:push": "drizzle-kit push:sqlite",
    "db:studio": "drizzle-kit studio",
    "db:seed": "tsx db/seeds/index.ts",
    "db:reset": "rm -f data/tourism.db && npm run setup && npm run db:seed"
  }
}
```

## 5. Google Maps API è¨­ç½®

### 5.1 API Key ç”³è«‹
1. å‰å¾€ [Google Cloud Console](https://console.cloud.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. å•Ÿç”¨ä»¥ä¸‹ APIï¼š
   - Maps JavaScript API
   - Geocoding API
   - Places API (å¯é¸)
4. å»ºç«‹ API Key
5. è¨­å®š API Key é™åˆ¶ï¼š
   ```
   æ‡‰ç”¨ç¨‹å¼é™åˆ¶: HTTP åƒç…§ç¶²å€
   å…è¨±çš„ç¶²å€: 
   - http://localhost:3000/*
   - https://yourdomain.com/*
   ```

### 5.2 API Key é…ç½®
```bash
# .env
GOOGLE_MAPS_KEY=AIzaSyBxxxxxxxxxxxxxxxxxxxxxxxxx

# é–‹ç™¼ç’°å¢ƒå¯ä»¥ä¸é™åˆ¶ï¼Œç”Ÿç”¢ç’°å¢ƒå‹™å¿…è¨­å®šé™åˆ¶
NUXT_PUBLIC_GOOGLE_MAPS_KEY=AIzaSyBxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 5.3 Maps åˆå§‹åŒ–æ¸¬è©¦
```vue
<!-- pages/test-map.vue -->
<template>
  <div>
    <h1>Google Maps æ¸¬è©¦</h1>
    <div ref="mapRef" style="height: 400px; width: 100%"></div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';

const mapRef = ref();
const { $config } = useNuxtApp();

onMounted(async () => {
  // å‹•æ…‹è¼‰å…¥ Google Maps
  const { Loader } = await import('@googlemaps/js-api-loader');
  
  const loader = new Loader({
    apiKey: $config.public.googleMapsKey,
    version: 'weekly',
  });

  try {
    await loader.load();
    
    // åˆå§‹åŒ–åœ°åœ–
    new google.maps.Map(mapRef.value, {
      center: { lat: 25.0330, lng: 121.5654 }, // å°åŒ—101
      zoom: 12,
    });
    
    console.log('âœ… Google Maps è¼‰å…¥æˆåŠŸ');
  } catch (error) {
    console.error('âŒ Google Maps è¼‰å…¥å¤±æ•—:', error);
  }
});
</script>
```

## 6. Claude API è¨­ç½® (å¯é¸)

### 6.1 API Key ç”³è«‹
1. å‰å¾€ [Anthropic Console](https://console.anthropic.com/)
2. å»ºç«‹å¸³è™Ÿä¸¦é©—è­‰
3. å»ºç«‹æ–°çš„ API Key
4. è¨­å®šä½¿ç”¨é™åˆ¶å’Œé ç®—

### 6.2 API æ¸¬è©¦
```typescript
// server/api/test-claude.get.ts
export default defineEventHandler(async (event) => {
  const config = useRuntimeConfig();
  
  if (!config.claudeApiKey) {
    throw createError({
      statusCode: 500,
      statusMessage: 'Claude API Key not configured'
    });
  }

  try {
    const response = await $fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': config.claudeApiKey,
        'anthropic-version': '2023-06-01'
      },
      body: {
        model: 'claude-3-sonnet-20240229',
        max_tokens: 100,
        messages: [{
          role: 'user',
          content: 'Hello, Claude! This is a test message.'
        }]
      }
    });

    return { success: true, response };
  } catch (error) {
    throw createError({
      statusCode: 500,
      statusMessage: 'Claude API test failed'
    });
  }
});
```

## 7. é–‹ç™¼å·¥å…·é…ç½®

### 7.1 ESLint é…ç½®
```javascript
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    browser: true,
    node: true,
  },
  extends: [
    '@nuxtjs/eslint-config-typescript',
    'plugin:prettier/recommended',
  ],
  plugins: [],
  rules: {
    'vue/multi-word-component-names': 'off',
    'vue/no-multiple-template-root': 'off',
  },
};
```

### 7.2 Prettier é…ç½®
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false
}
```

### 7.3 Git Hooks è¨­ç½®
```bash
# å®‰è£ husky å’Œ lint-staged
npm install -D husky lint-staged

# è¨­ç½® Git hooks
npx husky install
npx husky add .husky/pre-commit "npx lint-staged"
```

```json
// package.json
{
  "lint-staged": {
    "*.{js,ts,vue}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{css,scss,html,md}": [
      "prettier --write"
    ]
  }
}
```

## 8. å•Ÿå‹•å’Œé©—è­‰

### 8.1 å®Œæ•´å•Ÿå‹•æµç¨‹
```bash
# 1. å®‰è£æ‰€æœ‰ä¾è³´
npm install

# 2. è¨­ç½®ç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„ API Keys

# 3. åˆå§‹åŒ–è³‡æ–™åº«
npm run db:generate
npm run db:push
npm run db:seed

# 4. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run dev

# 5. é–‹å•Ÿç€è¦½å™¨
# http://localhost:3000
```

### 8.2 ç’°å¢ƒé©—è­‰æ¸…å–®
```bash
# åŸ·è¡Œé©—è­‰è…³æœ¬
npm run check-env
```

```typescript
// scripts/check-env.ts
import { execSync } from 'child_process';
import { existsSync } from 'fs';

console.log('ğŸ” æª¢æŸ¥é–‹ç™¼ç’°å¢ƒ...\n');

// æª¢æŸ¥ Node.js ç‰ˆæœ¬
try {
  const nodeVersion = execSync('node --version').toString().trim();
  console.log(`âœ… Node.js: ${nodeVersion}`);
} catch {
  console.log('âŒ Node.js æœªå®‰è£');
}

// æª¢æŸ¥ npm ç‰ˆæœ¬
try {
  const npmVersion = execSync('npm --version').toString().trim();
  console.log(`âœ… npm: ${npmVersion}`);
} catch {
  console.log('âŒ npm æœªå®‰è£');
}

// æª¢æŸ¥è³‡æ–™åº«æ–‡ä»¶
if (existsSync('./data/tourism.db')) {
  console.log('âœ… è³‡æ–™åº«æ–‡ä»¶å­˜åœ¨');
} else {
  console.log('âš ï¸  è³‡æ–™åº«æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè«‹åŸ·è¡Œ npm run setup');
}

// æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
if (existsSync('.env')) {
  console.log('âœ… ç’°å¢ƒè®Šæ•¸æ–‡ä»¶å­˜åœ¨');
} else {
  console.log('âš ï¸  .env æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè«‹è¤‡è£½ .env.example');
}

console.log('\nğŸ‰ ç’°å¢ƒæª¢æŸ¥å®Œæˆï¼');
```

## 9. å¸¸è¦‹å•é¡Œè§£æ±º

### 9.1 SpatiaLite æ“´å±•å•é¡Œ
```bash
# å¦‚æœ SpatiaLite è¼‰å…¥å¤±æ•—
# macOS: é‡æ–°å®‰è£ spatialite-tools
brew reinstall spatialite-tools

# Ubuntu: æª¢æŸ¥æ“´å±•è·¯å¾‘
sudo find /usr -name "*spatialite*" -type f 2>/dev/null

# æ‰‹å‹•æŒ‡å®šæ“´å±•è·¯å¾‘
sqlite3 -cmd "SELECT load_extension('/usr/lib/x86_64-linux-gnu/mod_spatialite.so')" tourism.db
```

### 9.2 Google Maps è¼‰å…¥å•é¡Œ
```typescript
// æ·»åŠ éŒ¯èª¤è™•ç†
const loadGoogleMaps = async () => {
  try {
    const { Loader } = await import('@googlemaps/js-api-loader');
    const loader = new Loader({
      apiKey: config.public.googleMapsKey,
      version: 'weekly',
      libraries: ['places'] // å¦‚æœéœ€è¦
    });
    
    await loader.load();
    return true;
  } catch (error) {
    console.error('Google Maps è¼‰å…¥å¤±æ•—:', error);
    // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯çµ¦ç”¨æˆ¶
    return false;
  }
};
```

### 9.3 ä¾è³´è¡çªè§£æ±º
```bash
# æ¸…é™¤ node_modules å’Œ lock æ–‡ä»¶
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£
npm install

# æˆ–ä½¿ç”¨ npm ci (æ¨è–¦åœ¨ CI/CD)
npm ci
```

é€™å€‹é–‹ç™¼ç’°å¢ƒè¨­ç½®æŒ‡å—ç¢ºä¿äº†åœ˜éšŠæˆå“¡èƒ½å¤ å¿«é€Ÿå»ºç«‹ä¸€è‡´çš„é–‹ç™¼ç’°å¢ƒï¼Œæ¸›å°‘ç’°å¢ƒé…ç½®ç›¸é—œçš„å•é¡Œã€‚